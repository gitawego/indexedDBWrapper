{"version":3,"sources":["IndexedDBWrapper.min.js","BaseEvented.js","CustomEvent.js","IDBStore.js","IndexedDBWrapper.js","helper.js"],"names":["requirejs","require","define","undef","hasProp","obj","prop","hasOwn","call","normalize","name","baseName","nameParts","nameSegment","mapValue","foundMap","lastIndex","foundI","foundStarMap","starI","i","j","part","baseParts","split","map","config","starMap","charAt","slice","length","nodeIdCompat","jsSuffixRegExp","test","replace","concat","splice","join","indexOf","substring","makeRequire","relName","forceSync","args","aps","arguments","push","req","apply","makeNormalize","makeLoad","depName","value","defined","callDep","waiting","defining","main","Error","splitPrefix","prefix","index","makeConfig","makeMap","handlers","Object","prototype","hasOwnProperty","plugin","parts","f","n","pr","p","exports","e","module","id","uri","deps","callback","cjsModule","ret","usingExports","callbackType","load","undefined","alt","setTimeout","cfg","_defined","amd","jQuery","_CustomEvent","_helper","_interopRequireDefault","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","_CustomEvent2","Array","BaseEvented","this","event","helper","applyIf","evts","connect","evt","fnc","once","bind","on","emit","broadcast","k","v","setConfigs","res","newValue","oldValue","isObject","deepClone","keys","forEach","setConfig","getter","remove","c","purgeListeners","$purgeSuper","eventize","self","proto","supers","$super","glb","window","global","uuid","crypto","getRandomValues","buf","Uint16Array","S4","num","toString","tpl","d","Date","getTime","r","Math","random","floor","mixin","dest","source","s","empty","CustomEvent","_listeners","channelSeparator","listener","_id","content","eventName","buildListener","hasListener","off","origContent","check","wildcard","params","evtNames","getEventNamesByWildcard","l","reg","idx","str","JSON","stringify","RegExp","ignore","eventType","listeners","len","result","listenerId","listenerType","evtName","IDBStore","db","storeName","store","getStore","Promise","resolve","reject","clear","onsuccess","onerror","error","_this","itemStore","item","add","keyPath","mode","openTransaction","query","data","merge","hasData","_this2","tasks","openMode","onCursor","cursor","objectStore","mergeData","primaryKey","cursorOperation","then","all","items","bulk","keyPathId","_this3","action","keyValue","get","range","IDBKeyRange","only","eq","bound","gte","lte","lt","gt","lowerBound","upperBound","_this4","_query","opt","order","reqStore","trans","collect","buildRange","indexNames","contains","openCursor","deferred","queryCursor","next","filter","queryFilter","abort","readyState","Function","_BaseEvented2","_IDBStore","_inherits","subClass","superClass","create","constructor","__proto__","_get","_x","_x2","_x3","_again","object","property","receiver","desc","parent","getOwnPropertyDescriptor","getPrototypeOf","_BaseEvented3","_IDBStore2","IndexedDBWrapper","_BaseEvented","dbName","version","stores","operatorMapping","forceShim","timeFormat","schema","indexedDB","msIndexedDB","mozIndexedDB","webkitIndexedDB","dbConfig","open","message","onupgradeneeded","oldVersion","schemas","_schema","thisDB","storeConf","objectStoreNames","transaction","alter","param","createObjectStore","indexes","idxName","idxConf","createIndex","unique","putNext","parsedItems","shift","method","isArray","put","results","src","oncomplete","onabort","close","deleteDatabase","sandbox","context","foundShim","totalShim","shimKeys","shimKey","restrictedVars","paramLen","shimIndex","emptyVars","shim","scope","debounce","func","wait","immediate","timeout","clearTimeout","randomIntFromInterval","min","max","throttle","fn","minDelay","lastCall","now","leftPad","size","ch","rightPad","chunk","process","todo","worker","start","ucFirst","toUpperCase","substr","addSlashes","override","substitute","template","transform","thisObject","run","match","format","getObject","taskBuffer","task","_on","done","err","taskBufferAsync","finished","options","total","_run","console","standby","shallowMixin","cpFunc","nonStrict","tval","sval","oToBeCloned","oClone","FConstr","HTMLElement","cloneNode","Number","ignoreCase","multiline","sProp","isType","compare","o","realType","xml","trim","mapping","toLowerCase","eval","parse","DOMParser","parseFromString","getElementsByTagName","castType","type","typeMapping","string","number","array","arr","tmp","boolean","getProp","partial","arg","queryToObject","separator","objectToQuery","fromJson","encodeURIComponent","parseUrl","url","baseUrl","a","document","createElement","href","location","hash","host","hostname","pathname","port","protocol","search","htmlentities","quote_style","charset","double_encode","hash_map","get_html_translation_table","symbol","text","entity","table","decimal","entities","constMappingTable","constMappingQuoteStyle","useTable","useQuoteStyle","isNaN","String","fromCharCode","async","makeGenerator","handle","generator"],"mappings":"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BA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,QAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,QAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,SAClBA,EAAS,KAAS,WAClBA,EAAS,KAAS,UAClBA,EAAS,KAAS,UAGA,iBAAlBI,IACAJ,EAAS,IAAQ,UAEC,eAAlBI,IACAJ,EAAS,IAAQ,SAErBA,EAAS,IAAQ,OACjBA,EAAS,IAAQ,MAGjB,KAAKD,IAAWC,GACRA,EAAStZ,eAAeqZ,KACxBN,EAASa,OAAOC,aAAaR,IAAYC,EAASD,GAI1D,OAAON,IAQXe,MAAO,SAAeC,GAClB,MAAO,YAEH,QAASC,GAAOzR,GAEZ,MAAIA,GAAOgM,KACAhM,EAAOtJ,MAEdsJ,EAAOtJ,MAAM0L,KACNpC,EAAOtJ,MAAM0L,KAAK,SAAUzG,GAC/B,MAAO8V,GAAOC,EAAUrN,KAAK1I,KAC9B,SAAUsQ,GACT,MAAOwF,GAAOC,EAAU,SAASzF,MAG9BjM,EAAOtJ,MAAM,SAAUuV,EAAKtQ,GAE3B8V,EADAxF,EACOyF,EAAU,SAASzF,GAEnByF,EAAUrN,KAAK1I,MAjBtC,GAAI+V,GAAYF,EAAclb,MAAMqE,KAAMxE,UAsB1C,OAAOsb,GAAOC,EAAUrN,UAIpCrM,SAAQ6C,OAASA,SAIpBF,KAAuB,iBAAEpH,QAAQ,oBAAoB,aAAgB6H,KAAK0B","file":"IndexedDBWrapper.min.js","sourcesContent":[null,"import CustomEvent from './CustomEvent';\nimport {helper} from './helper';\n\nlet slice = Array.prototype.slice;\n\n/**\n * evented base component, use CustomEvent as compositor\n * @class com.sesamtv.core.util.BaseEvented\n * @requires com.sesamtv.core.util.CustomEvent\n */\nexport default class BaseEvented {\n    constructor() {\n        /**\n         * @property event\n         * @type {com.sesamtv.core.util.CustomEvent}\n         */\n        this.event = new CustomEvent();\n\n        helper.applyIf(this, {\n            /**\n             * named listener handlers\n             * @property evts\n             * @type {Object}\n             */\n            evts: {},\n            /**\n             * anonymous listener handlers\n             * @property connect\n             * @type {Array}\n             */\n            connect: [],\n            config: {}\n        });\n    }\n\n    /**\n     * @method on\n     * @param {String} evt\n     * @param {Function} fnc\n     * @param {Boolean} [once]\n     * @returns {{id: Number, remove: Function}}\n     */\n    on(evt, fnc, once) {\n        return this.event[once ? 'once' : 'on'](evt, fnc.bind(this));\n    }\n\n    /**\n     * @method once\n     * @param {String} evt\n     * @param {Function} fnc\n     * @returns {{id: Number, remove: Function}}\n     */\n    once(evt, fnc) {\n        return this.on(evt, fnc.bind(this), true);\n    }\n\n    /**\n     * @method emit\n     * @returns {Array}\n     */\n    emit() {\n        return this.event.emit.apply(this.event, arguments);\n    }\n\n    /**\n     * @method broadcast\n     * @param {String} wildcard\n     */\n    broadcast(wildcard) {\n        return this.event.broadcast.apply(this.event, arguments);\n    }\n\n    /**\n     * set a property\n     * @method set\n     * @param k\n     * @param v\n     */\n    set(k, v) {\n        if (k === 'config') {\n            return this.setConfigs(v);\n        }\n        if (k in this && this[k] === v) {\n            return;\n        }\n        var res = {\n            newValue: v\n        };\n        if (k in this) {\n            res.oldValue = isObject(this[k]) ? helper.deepClone(this[k]) : this[k];\n        }\n        this[k] = v;\n        this.emit(k, res);\n\n    }\n\n    /**\n     * @method setConfigs\n     * @param {Object} v\n     */\n    setConfigs(v) {\n        Object.keys(v).forEach(function (k) {\n            this.setConfig(k, v[k]);\n        }, this);\n    }\n\n    /**\n     * set a config property\n     * @method setConfig\n     * @param {String} k\n     * @param {*} v\n     */\n    setConfig(k, v) {\n        if (arguments.length === 1) {\n            return this.setConfigs(k);\n        }\n        if (k in this.config && this.config[k] === v) {\n            return;\n        }\n        var res = {\n            key: k,\n            newValue: v\n        };\n        if (k in this.config) {\n            res.oldValue = isObject(this.config[k]) ? helper.deepClone(this.config[k]) : this.config[k];\n        }\n        this.config[k] = v;\n        this.emit('config', res);\n        this.emit('config/' + k, res);\n    }\n\n    /**\n     * @method getConfig\n     * @param {String} k\n     * @returns {*}\n     */\n    getConfig(k) {\n        var res = this.config[k], getter = k + 'Getter';\n        if (this.config[getter]) {\n            return this.config[getter](res, this);\n        }\n        return res;\n    }\n\n    removeEvts(evts) {\n        evts.forEach(function (evt) {\n            if (this.evts[evt]) {\n                this.evts[evt].remove();\n                delete this.evts[evt];\n            }\n        }, this);\n    }\n\n    /**\n     * @method destroy\n     */\n    destroy() {\n\n        this.connect.forEach(function (c) {\n            c.remove();\n        });\n        this.connect.length = 0;\n        Object.keys(this.evts).forEach(function (e) {\n            this.evts[e].remove();\n        }, this);\n        this.evts = {};\n        this.event.purgeListeners();\n        this.$purgeSuper && this.$purgeSuper();\n    }\n}\n/**\n * eventize an object by composition\n * @method eventize\n * @static\n * @param {Object} self\n * @returns {Object}\n */\nBaseEvented.eventize = function (self) {\n    self.event = new CustomEvent();\n    helper.applyIf(self, {\n        evts: {},\n        connect: [],\n        config: {}\n    });\n    var proto = BaseEvented.prototype, supers = {};\n    Object.keys(proto).forEach(function (k) {\n        if (k in self && typeof(self[k]) === 'function') {\n            supers[k] = proto[k];\n        } else {\n            self[k] = proto[k];\n        }\n    });\n    self.$super = function (k) {\n        return supers[k] && supers[k].apply(this, slice.call(arguments, 1));\n    };\n    self.$purgeSuper = function () {\n        supers = null;\n    };\n    return self;\n};\n","\"use strict\";\nlet slice = Array.prototype.slice,\n    glb = typeof(window) !== 'undefined' ? window : global;\n\nlet uuid = (typeof(glb.crypto) != 'undefined' &&\ntypeof(glb.crypto.getRandomValues) != 'undefined') ?\n    function () {\n        // If we have a cryptographically secure PRNG, use that\n        // http://stackoverflow.com/questions/6906916/collisions-when-generating-uuids-in-javascript\n        var buf = new Uint16Array(8);\n        glb.crypto.getRandomValues(buf);\n        var S4 = function (num) {\n            var ret = num.toString(16);\n            while (ret.length < 4) {\n                ret = \"0\" + ret;\n            }\n            return ret;\n        };\n        return (S4(buf[0]) + S4(buf[1]) + \"-\" + S4(buf[2]) + \"-\" + S4(buf[3]) + \"-\" + S4(buf[4]) + \"-\" + S4(buf[5]) + S4(buf[6]) + S4(buf[7]));\n    } : function uuid(tpl) {\n    tpl = tpl || 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx';\n    var d = (new Date()).getTime();\n    return tpl.replace(/[xy]/g, function (c) {\n        var r = (d + Math.random() * 16) % 16 | 0;\n        d = Math.floor(d / 16);\n        return (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n    });\n};\nlet mixin = function mixin(dest, source) {\n    var name, s, empty = {};\n    for (name in source) {\n        s = source[name];\n        if (!(name in dest) ||\n            (dest[name] !== s && (!(name in empty) || empty[name] !== s))) {\n            dest[name] = s;\n        }\n    }\n    return dest;\n};\n/**\n * @class com.sesamtv.core.util.CustomEvent\n * @cfg {Object} [args]\n * @cfg {String} [args.channelSeparator]\n */\nexport default class CustomEvent {\n    constructor(args) {\n        /**\n         * @property _listeners\n         * @type {Object.<String,Array>}\n         * @private\n         */\n        this._listeners = {};\n        this.channelSeparator = '/';\n        args && mixin(this, args);\n    }\n\n    /**\n     * @method buildListener\n     * @private\n     * @param {Function|Object} listener\n     * @return {{id:String,content:Function}}\n     */\n    buildListener(listener) {\n        var _id = '#Listener:' + uuid();\n        if (typeof listener === 'function') {\n            listener = {\n                id: _id,\n                content: listener\n            };\n        } else {\n            if (!listener.id) {\n                listener.id = _id;\n            }\n        }\n        return listener;\n    }\n\n    /**\n     * @method on\n     * @param {String} eventName\n     * @param {Function|Object} listener\n     * @param {String} listener.id if listener is an object, define listener id\n     * @param {Function} listener.content if listener is an object, define function\n     * @return {{id:Number,remove:Function}}\n     */\n    on(eventName, listener) {\n        var self = this;\n        if (typeof this._listeners[eventName] === \"undefined\") {\n            this._listeners[eventName] = [];\n        }\n        listener = this.buildListener(listener);\n        if (this.hasListener(eventName, listener.id)) {\n            throw new Error('listener id ' + listener.id + ' duplicated');\n        }\n        this._listeners[eventName].push(listener);\n        return {\n            remove: function () {\n                return self.off(eventName, listener.id);\n            },\n            id: listener.id\n        };\n    }\n\n    /**\n     * listener is triggered only once\n     * @method once\n     * @param {String} eventName\n     * @param {Function|Object} listener\n     * @param {Function} listener.content\n     * @param {String} listener.id\n     * @return {{id:Number,remove:Function}}\n     */\n    once(eventName, listener) {\n        var self = this;\n        listener = this.buildListener(listener);\n        var origContent = listener.content;\n        listener.content = function () {\n            self.off(eventName, listener.id);\n            origContent.apply(self, arguments);\n        };\n        return this.on(eventName, listener);\n    }\n\n    /**\n     * listener is removed when the callback return true\n     *\n     *      this.when('click',function(node){\n             *          return node.id === 'container';\n             *      });\n     *\n     * @method when\n     * @param {String} event\n     * @param {Function} callback\n     * @returns {*}\n     */\n    when(event, callback) {\n        var self = this;\n\n        function check() {\n            if (callback.apply(this, arguments)) {\n                self.off(event, check);\n            }\n        }\n\n        check.listener = callback;\n        self.on(event, check);\n        return this;\n    }\n\n    /**\n     * broadcast message to events, support wildcard (* or ?)\n     *\n     *      this.broadcast('channel1/*',message);\n     *      this.broadcast('channel1/????/event1',message);\n     *      this.broadcast('channel1/event1',msg1,msg2);\n     *\n     * @method broadcast\n     * @param {String} wildcard\n     */\n    broadcast(wildcard) {\n        var params = slice.call(arguments, 1), evtNames = this.getEventNamesByWildcard(wildcard),\n            i = 0, l = evtNames.length, res = [];\n        for (; i < l; i++) {\n            res.push(this.emit.apply(this, [evtNames[i]].concat(params)));\n        }\n        return res;\n    }\n\n    /**\n     * @method getEventNamesByWildcard\n     * @param {String} wildcard\n     * @return {Array.<String>}\n     */\n    getEventNamesByWildcard(wildcard) {\n        var evts = [],\n            self = this,\n            reg = wildcard.replace(/(\\?)/g, function (str, m) {\n                return '[\\\\w\\'-]{1}';\n            }).replace(/\\*/g, function (key, idx, str) {\n                return str.charAt(idx + 1) !== '' ? '([\\\\S\\\\s][^' + self.channelSeparator + ']*)' : '.*?';\n            });\n        JSON.stringify(Object.keys(this._listeners)).replace(new RegExp('\"(' + reg + ')\"', 'g'), function (ignore, eventName) {\n            evts.push(eventName);\n        });\n        return evts;\n    }\n\n    /**\n     * example:\n     *\n     *      this.emit('evtName');\n     *      this.emit('evtName',params);\n     *      this.emit('evtName',param1,param2);\n     *\n     * @method emit\n     * @param {String} eventType\n     * @return {Array}\n     */\n    emit(eventType) {\n        var params, res = [], listeners, len;\n        if (!eventType) {  //falsy\n            throw new Error(\"Event object missing 'eventName' property.\");\n        }\n        params = slice.call(arguments, 1);\n        if (this._listeners[eventType] instanceof Array) {\n            listeners = this._listeners[eventType];\n            len = listeners.length;\n            //decrease the length (instead of increasing from 0)\n            // in case listener is removed while emit method is running\n            while (len--) {\n                if (listeners[len]) {\n                    res.push({\n                        id: listeners[len].id,\n                        result: listeners[len].content.apply(this, params)\n                    });\n                }\n            }\n        }\n        return res;\n    }\n\n    /**\n     * emit to a particular listener\n     *\n     *      this.emitTo('eventName','listenerId',param1,param2);\n     *\n     * @method emitTo\n     * @param eventType\n     * @param listenerId\n     * @returns {Array}\n     */\n    emitTo(eventType, listenerId) {\n        if (!eventType) {  //falsy\n            throw new Error(\"Event object missing 'eventName' property.\");\n        }\n        var params = slice.call(arguments, 2), res = [], listeners, l;\n        if (this._listeners[eventType] instanceof Array) {\n            listeners = this._listeners[eventType];\n            l = listeners.length;\n            while (l--) {\n                if (listeners[l] && listeners[l].id === listenerId) {\n                    res.push({\n                        id: listenerId,\n                        result: listeners[l].content.apply(this, params)\n                    });\n                    break;\n                }\n            }\n            if (listenerId && !res.length) {\n                throw new Error('listener ' + listenerId + ' is not found in event ' + eventType);\n            }\n        }\n        return res;\n    }\n\n    /**\n     * remove a listener\n     * @method off\n     * @param {String} eventName\n     * @param {String|Function} listener a listener id or listener handler\n     */\n    off(eventName, listener) {\n        var res;\n        if (res = this.hasListener(eventName, listener)) {\n            this._listeners[eventName].splice(res.index, 1);\n        }\n    }\n\n    hasEvent(eventName) {\n        if (!eventName) {\n            return Object.keys(this._listeners).length > 0;\n        }\n        return eventName in this._listeners;\n    }\n\n    eventList() {\n        return Object.keys(this._listeners);\n    }\n\n    /**\n     * @method hasListener\n     * @param {String} eventName\n     * @param {String|Function} listener\n     * @return {Object}\n     */\n    hasListener(eventName, listener) {\n        var listenerType = typeof(listener) === 'string' ? 'id' : 'content', listeners, i = 0, len;\n        if ((listeners = this._listeners[eventName]) && (len = listeners.length) > 0) {\n            for (; i < len; i++) {\n                if (listeners[i][listenerType] === listener) {\n                    return {\n                        index: i\n                    };\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * @method hasListeners\n     * @param {String} eventName event name\n     * @return {Boolean}\n     */\n    hasListeners(eventName) {\n        if (this._listeners[eventName] instanceof Array) {\n            return this._listeners[eventName].length > 0;\n        }\n        return false;\n    }\n\n    /**\n     * @method getListeners\n     * @param {string} eventName event name\n     * @return {Array.<Object>}\n     */\n    getListeners(eventName) {\n        if (this._listeners[eventName] instanceof Array) {\n            return this._listeners[eventName];\n        }\n    }\n\n    /**\n     * @method purgeListeners\n     * @param {String} [evtName] if evtName is undefined, remove all the events\n     */\n    purgeListeners(evtName) {\n        if (evtName) {\n            delete this._listeners[evtName];\n        } else {\n            delete this._listeners;\n            this._listeners = {};\n        }\n    }\n}\n","export default\nclass IDBStore {\n    constructor(db, storeName) {\n        this.db = db;\n        this.storeName = storeName;\n    }\n\n    clear() {\n        var store = this.db.getStore(this.storeName, 'readwrite');\n        return new Promise(function (resolve, reject) {\n            var req = store.clear();\n            req.onsuccess = resolve;\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    drop() {\n        return new Promise((resolve, reject)=> {\n            var itemStore = this.db.getStore(this.storeName, 'readwrite'),\n                req = itemStore['delete']();\n            req.onsuccess = resolve;\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    insert(item) {\n        var itemStore = this.db.getStore(this.storeName, 'readwrite'),\n            req = itemStore.add(item);\n        return new Promise(function (resolve, reject) {\n            req.onsuccess = function(res){\n                item[itemStore.keyPath] = this.result;\n                resolve(item);\n            };\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    openTransaction(mode) {\n        return this.db.openTransaction(this.storeName, mode);\n    }\n\n    upsert(query, data, merge) {\n        var tasks = [], hasData;\n        return new Promise((resolve, reject) => {\n            this.query(query, {\n                openMode: 'readwrite',\n                onCursor: (cursor, store, objectStore) => {\n                    hasData = true;\n                    if (merge) {\n                        data = this.db.mergeData(cursor.value, data);\n                    }\n                    data[objectStore.keyPath] = cursor.primaryKey;\n                    tasks.push(this.cursorOperation(cursor, 'update', data));\n                }\n            }).then((res)=> {\n                if (!hasData) {\n                    var objectStore = this.db.getStore(this.storeName, 'readwrite');\n                    tasks.push(new Promise(function (resolve, reject) {\n                        var req = objectStore.add(data);\n                        req.onsuccess = function(){\n                            data[objectStore.keyPath] = this.result;\n                            resolve(data);\n                        };\n                        req.onerror = reject;\n                    }));\n                }\n                if (!tasks.length) {\n                    return resolve();\n                }\n                Promise.all(tasks).then(resolve, reject);\n            }, reject);\n        });\n    }\n\n    bulk(items) {\n        return this.db.bulk(items, this.storeName);\n    }\n\n    removeByKey(keyPathId) {\n        var itemStore = this.db.getStore(this.storeName, 'readwrite'),\n            req = itemStore['delete'](keyPathId);\n        return new Promise(function (resolve, reject) {\n            req.onsuccess = function(){\n                resolve(this.result);\n            };\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    remove(query) {\n        var tasks = [];\n        return new Promise((resolve, reject) => {\n            this.query(query, {\n                openMode: 'readwrite',\n                onCursor: (cursor) => {\n                    if (cursor) {\n                        tasks.push(this.cursorOperation(cursor, 'delete'));\n                    }\n                }\n            }).then(function () {\n                if (!tasks.length) {\n                    return resolve();\n                }\n                Promise.all(tasks).then(resolve, reject);\n            }, reject);\n        });\n    }\n\n    cursorOperation(cursor, action, data) {\n        return new Promise(function (resolve, reject) {\n            var req;\n            if (action !== 'delete') {\n                req = cursor[action](data);\n            } else {\n                req = cursor[action]();\n            }\n            req.onsuccess = function(){\n                resolve(this.source.value);\n            };\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    findByKey(keyValue) {\n        var req = this.db.getStore(this.storeName, 'readwrite').get(keyValue);\n        return new Promise(function (resolve, reject) {\n            req.onsuccess = function(){\n                resolve(this.result);\n            };\n            req.onerror = function(evt){\n                reject(evt.target.error);\n            };\n        });\n    }\n\n    buildRange(query) {\n        var range;\n        query = query || {};\n        if ('eq' in query) {\n            range = IDBKeyRange.only(query.eq);\n        } else if ('gte' in query && 'lte' in query) {\n            range = IDBKeyRange.bound(query.gte, query.lte, true, true);\n        } else if ('gte' in query && 'lt' in query) {\n            range = IDBKeyRange.bound(query.gte, query.lt, true, false);\n        } else if ('gt' in query && 'lt' in query) {\n            range = IDBKeyRange.bound(query.gt, query.lt, false, false);\n        } else if ('gt' in query && 'lte' in query) {\n            range = IDBKeyRange.bound(query.gt, query.lte, false, true);\n        } else if ('gt' in query) {\n            range = IDBKeyRange.lowerBound(query.gt);\n        } else if ('gte' in query) {\n            range = IDBKeyRange.lowerBound(query.gte, true);\n        } else if ('lt' in query) {\n            range = IDBKeyRange.upperBound(query.lt);\n        } else if ('lte' in query) {\n            range = IDBKeyRange.upperBound(query.lte, true);\n        }\n        return range;\n    }\n\n    findOne(query) {\n        return new Promise((resolve, reject) => {\n            this.query(query, {\n                onCursor: function () {\n                    return false;\n                }\n            }).then(function (res) {\n                resolve(res[0]);\n            }, reject);\n        });\n    }\n\n    find(query) {\n        return this.query(query);\n    }\n\n    /**\n     *\n     *  query({\n     *      \"eq\":\"admin\",\n     *      \"index\":\"username\",\n     *      \"filter\":[\"$record.total > 10\"]\n     *  });\n     *\n     * @method query\n     * @param {Object} query\n     * @param {*} query.eq only\n     * @param {*} query.gt lowerBound\n     * @param {*} query.gte lowerBound with true\n     * @param {*} query.lt upperBound\n     * @param {*} query.lte upperBound with true\n     * @param {Array|Function} query.filter\n     * @param {String} [query.order] prev,prevunique,next,nextunique\n     * @param {Object} [opt]\n     * @param {String} [opt.openMode='readonly'] readwrite or readonly\n     * @param {Function} [opt.onCursor]\n     */\n    query(query, opt) {\n        opt = opt || {};\n        opt.openMode = opt.openMode || 'readonly';\n        query = query || {};\n        query.order = query.order || 'next';\n        var trans = this.openTransaction(opt.openMode),\n            objectStore = trans.objectStore(this.storeName), reqStore,\n            self = this, collect = [], req, range;\n        range = this.buildRange(query);\n        reqStore = objectStore;\n        if (range) {\n            if (query.index && objectStore.indexNames.contains(query.index)) {\n                reqStore = objectStore.index(query.index);\n                req = reqStore.openCursor(range, query.order);\n            } else {\n                req = reqStore.openCursor(range, query.order);\n            }\n        } else {\n            req = reqStore.openCursor();\n        }\n\n        var deferred = new Promise((resolve, reject)=> {\n            req.onsuccess = function (event) {\n                var queryCursor = event.target.result, next = true;\n                if (queryCursor) {\n                    if (query.filter) {\n                        if (!self.queryFilter(query.filter, queryCursor)) {\n                            return queryCursor['continue']();\n                        }\n                    }\n                    if (opt.onCursor) {\n                        next = opt.onCursor(queryCursor, reqStore, objectStore) !== false;\n                    }\n                    collect.push(queryCursor.value);\n                    if (next) {\n                        queryCursor['continue']();\n                    } else {\n                        resolve(collect);\n                    }\n                } else {\n                    resolve(collect);\n                }\n            };\n\n            req.onerror = function (evt) {\n                console.warn(evt.target.error.message, evt.target.error.name);\n                reject(evt.target.error);\n            };\n        });\n        deferred.abort = function () {\n            req.readyState !== 'done' && trans.abort();\n        };\n        return deferred;\n    }\n\n    queryFilter(filter, cursor) {\n        if (typeof(filter) === 'function') {\n            return filter(cursor);\n        }\n        var value = cursor.value;\n        return new Function('$record', 'return ' + filter.join(' && ') + ' ;')(value);\n    }\n}\n","import BaseEvented from './BaseEvented';\nimport {helper} from './helper';\nimport IDBStore from './IDBStore';\n/**\n * this class depends on axemclion/IndexedDBShim\n * @class com.sesamtv.core.util.store.IndexedDBStore\n * @extends com.sesamtv.core.util.BaseEvented\n */\nexport default\nclass IndexedDBWrapper extends BaseEvented {\n\n    constructor(config) {\n        super();\n        this.config = {\n            dbName: '',\n            version: 1,\n            stores: {},\n            operatorMapping: {\n                \"eq\": \"=\",\n                \"gt\": \">\",\n                \"gte\": \">=\",\n                \"lt\": \"<\",\n                \"lte\": \"<=\"\n            },\n            forceShim: false,\n            timeFormat: /^(\\d{4})(-(\\d{2}))??(-(\\d{2}))??(T(\\d{2}):(\\d{2})(:(\\d{2}))??(\\.(\\d+))??(([\\+\\-]{1}\\d{2}:\\d{2})|Z)??)??$/,\n            schema: {}\n        };\n        config && helper.mixin(this.config, config);\n        \n\n\n    }\n\n    indexedDB() {\n        return window.indexedDB\n            || window.msIndexedDB\n            || window.mozIndexedDB\n            || window.webkitIndexedDB;\n    }\n\n    open(dbConfig) {\n        var self = this;\n        this.config.dbName = dbConfig.dbName;\n        this.config.version = dbConfig.version;\n        return new Promise((resolve, reject) => {\n            var req = this.indexedDB().open(this.config.dbName, this.config.version);\n            req.onsuccess = function (evt) {\n                // Better use \"this\" than \"req\" to get the result to avoid problems with\n                // garbage collection.\n                // db = req.result;\n                self.db = this.result;\n                self.db.onerror = function (evt) {\n                    //global error\n                    self.emit('error', evt.target.error.message);\n                };\n                resolve(self.db);\n\n            };\n            req.onerror = function (evt) {\n                reject(evt.target.error);\n            };\n            req.onupgradeneeded = function (e) {\n                console.log('onupgradeneeded');\n                self.db = this.result;\n                if (!dbConfig.schema || dbConfig.schema.length === 0) {\n                    throw new Error('no schema defined, can not upgrade');\n                }\n                if (e.oldVersion >= dbConfig.schema[dbConfig.schema.length - 1].version) {\n                    return;\n                }\n                self.config.oldVersion = e.oldVersion;\n                self.schema(dbConfig.schema);\n            };\n        });\n    }\n\n    schema(schemas) {\n        this.config.schema = schemas;\n        schemas.forEach(function (schema) {\n            if (schema.version > this.config.oldVersion) {\n                this._schema(schema.schema);\n            }\n        }, this);\n    }\n\n    /**\n     *\n     * @param schema\n     */\n    _schema(schema) {\n        var thisDB = this.db;\n        Object.keys(schema).forEach(function (storeName) {\n            var storeConf = schema[storeName], objectStore;\n            if (thisDB.objectStoreNames.contains(storeName)) {\n                objectStore = thisDB.transaction([storeName], 'readwrite').objectStore(storeName);\n                //for upgrading\n                if (storeConf.alter) {\n                    storeConf.alter.forEach(function (alter) {\n                        if (alter.param) {\n                            objectStore[alter.action].apply(objectStore, alter.param);\n                        } else {\n                            objectStore[alter.action]();\n                        }\n                    });\n                }\n            } else {\n                objectStore = thisDB.createObjectStore(storeName, storeConf.keyPath);\n            }\n            if (storeConf.indexes) {\n                Object.keys(storeConf.indexes).forEach(function (idxName) {\n                    var idxConf = storeConf.indexes[idxName];\n                    objectStore.createIndex(idxName, idxConf.index, {\n                        unique: idxConf.unique\n                    });\n                });\n            }\n        }, this);\n    }\n\n    store(storeName) {\n        if (this.config.stores[storeName]) {\n            return this.config.stores[storeName];\n        }\n        if (this.db.objectStoreNames.contains(storeName)) {\n            return this.config.stores[storeName] = new IDBStore(this, storeName);\n        }\n    }\n\n    /**\n     * items format:\n     *\n     *\n     * {\"put\":[],\"delete\":[],\"upsert\":[{\n     *  \"index\":\"myIndex\",\n     *  \"key\":[\"_id\",\"username\"]\n     *  \"data\":{\n     *      \"_id\":123123,\n     *      \"username\":\"admin\",\n     *      \"key\":null\n     *  },\n     *  \"merge\":true\n     * }]}\n     *\n     * or\n     *\n     *      [\n     *          {method:'add',data:{...}},\n     *          {method:'delete',data:keyPathValue},\n     *          {method:'delete',data:indexValue,index:'id'}\n     *      ]\n     *\n     * @param {Object} items\n     * @param {String} [storeName]\n     * @returns {Promise}\n     */\n    bulk(items, storeName) {\n        var self = this;\n        return new Promise((resolve, reject)=> {\n            var parsedItems = [], item,\n                itemStore = this.getStore(storeName, 'readwrite', {\n                    onerror: function (evt) {\n                        var error = evt.target.error;\n                        error.item = item;\n                        reject(error);\n                    }\n                }), res = [];\n\n            if (Array.isArray(items)) {\n                parsedItems = items;\n            } else {\n                Object.keys(items).forEach(function (method) {\n                    parsedItems = parsedItems.concat(items[method].map(function (data) {\n                        return {\n                            method: method,\n                            data: data\n                        };\n                    }));\n                });\n            }\n\n            function putNext(evt) {\n                var req;\n                if (evt) {\n                    res.push(this.result);\n                }\n                if (parsedItems.length) {\n                    item = parsedItems.shift();\n                    if (item.method === 'upsert') {\n                        if (item.data.index) {\n                            if (itemStore.indexNames.contains(item.data.index)) {\n                                if (!item.data.key) {\n                                    item.data.key = item.data.index;\n                                }\n                                req = itemStore.index(item.data.index)\n                                    .get(Array.isArray(item.data.key) ? item.data.key.map(function (k) {\n                                        return item.data.data[k];\n                                    }) : item.data.data[item.data.key]);\n\n                            } else {\n                                return reject(new Error('index name not found'));\n                            }\n                        } else {\n                            req = itemStore.get(item.data.data[itemStore.keyPath]);\n                        }\n                        req.onsuccess = function (evt) {\n                            if (this.result) {\n                                if (item.data.merge) {\n                                    item.data.data = self.mergeData(this.result, item.data.data);\n                                } else {\n                                    if (item.data.key) {\n                                        if (Array.isArray(item.data.key)) {\n                                            item.data.key.forEach(function (k) {\n                                                item.data.data[k] = this.result[k];\n                                            }, this);\n                                        } else {\n                                            item.data.data[item.data.key] = this.result[item.data.key];\n                                        }\n                                    }\n                                    item.data.data[itemStore.keyPath] = this.result[itemStore.keyPath];\n                                }\n                            }\n                            itemStore.put(item.data.data).onsuccess = putNext;\n                        }\n                    } else {\n                        if (item.index) {\n                            req = itemStore.index(item.index)[item.method](item.data);\n                        } else {\n                            req = itemStore[item.method](item.data);\n                        }\n                        req.onsuccess = putNext;\n                    }\n\n                } else {\n                    resolve({\n                        results: res,\n                        store: storeName\n                    });\n                }\n            }\n\n            putNext();\n        });\n    }\n\n    getStore(storeName, mode, opt) {\n        var trans = this.openTransaction(storeName, mode, opt);\n        return trans.objectStore(storeName);\n    }\n\n    mergeData(src, data) {\n        Object.keys(data).forEach(function (k) {\n            if (data[k] === null) {\n                delete src[k];\n            } else {\n                src[k] = data[k];\n            }\n        });\n        return src;\n    }\n\n    openTransaction(storeName, mode, opt) {\n        opt = opt || {};\n        var trans = this.db.transaction(storeName, mode);\n        if ('oncomplete' in opt) {\n            trans.oncomplete = opt.oncomplete;\n        }\n        if ('onabort' in opt) {\n            trans.onabort = opt.onabort;\n        }\n        if ('onerror' in opt) {\n            trans.onerror = opt.onerror;\n        }\n        return trans;\n    }\n\n    dropDB() {\n        this.close();\n        return this.indexedDB().deleteDatabase(this.config.dbName);\n    }\n    \n    close() {\n        return this.db.close();\n    }\n\n}\n","\"use strict\";\nlet slice = Array.prototype.slice;\n/**\n * @class com.sesamtv.core.util.Helper\n */\nexport var helper = {\n    /**\n     * create a sandboxed function\n     *\n     *      var fnc = sandbox(['id','name'],'alert(\"id\");');\n     *      //it will throw an error \"undefined is not a function\", because alert is disabled\n     *      fnc(10,'my name');\n     *\n     *      var fnc = sandbox(['id'], 'document.querySelector(\"#\"+id)');\n     *      //it will throw an error because document is disabled\n     *      fnc('container');\n     *\n     *      //to give the access of document to the function\n     *      var fnc = sandbox(['id'],'return document.querySelector(\"#\"+id);',{\n         *          shim:{\n         *              'document':document\n         *          }\n         *      });\n     *      //or only partially\n     *      var fnc = sandbox(['id'],'return document.querySelector(\"#\"+id);',{\n         *          shim:{\n         *              'document':{\n         *                  \"querySelector\":document.querySelector\n         *              }\n         *          }\n         *      });\n     *      fnc('menu');\n     *\n     *\n     * @method sandbox\n     * @param {Array.<String>} param\n     * @param {String} context\n     * @param {Object} opt\n     * @param {Array.<String>} [opt.restrictedVars] restricted variables\n     * @param {Object} [opt.shim] shim the restricted variables\n     * @param {Object} [opt.scope]\n     * @returns {Function}\n     */\n    sandbox: function sandbox(param, context, opt) {\n        opt = opt || {};\n        var restrictedVars = ['window', 'document', 'alert', 'location', 'openDatabase', 'indexedDB',\n                'console', 'close', 'setTimeout', 'setInterval', 'open', 'localStorage', 'sessionStorage',\n                'parent', 'self', 'addEventListener', 'dispatchEvent', 'postMessage', 'WebSocket', 'Blob',\n                'require', 'define', '$'].concat(opt.restrictedVars || []),\n            paramLen = param.length, fnc, argLen = 0, args, shimIndex = 0, foundShim, totalShim,\n            emptyVars = new Array(restrictedVars.length), shimKeys, shimKey,\n            splice = Array.prototype.splice;\n\n        if (opt.shim) {\n            shimKeys = Object.keys(opt.shim);\n            for (totalShim = shimKeys.length; shimIndex < totalShim; shimIndex++) {\n                shimKey = shimKeys[shimIndex];\n                foundShim = restrictedVars.indexOf(shimKey);\n                if (foundShim === -1) {\n                    continue;\n                }\n                emptyVars.splice(foundShim, 1, opt.shim[shimKey]);\n            }\n        }\n\n        param = param.concat(restrictedVars);\n        fnc = new Function(param.join(','), context);\n        return function () {\n            args = splice.call(arguments, 0, paramLen);\n            args = args.concat(emptyVars);\n            return fnc.apply(opt.scope || {}, args);\n        };\n    },\n\n    debounce: function debounce(func, wait, immediate) {\n        var timeout;\n        return function () {\n            var context = this, args = arguments;\n            clearTimeout(timeout);\n            timeout = setTimeout(function () {\n                timeout = null;\n                if (!immediate) func.apply(context, args);\n            }, wait);\n            if (immediate && !timeout) func.apply(context, args);\n        };\n    },\n    randomIntFromInterval: function randomIntFromInterval(min, max) {\n        return Math.floor(Math.random() * (max - min + 1) + min);\n    },\n    throttle: function throttle(fn, minDelay) {\n        var lastCall = 0;\n        return function () {\n            var now = +new Date();\n            if (now - lastCall < minDelay) {\n                return;\n            }\n            lastCall = now;\n            return fn.apply(this, arguments);\n        };\n    },\n    /**\n     * @method leftPad\n     * @param {String|Number} result\n     * @param {Number} size\n     * @param {String} ch\n     * @returns {string}\n     */\n    leftPad: function (result, size, ch) {\n        result += '';\n        if (!ch) {\n            ch = \" \";\n        }\n        while (result.length < size) {\n            result = ch + result;\n        }\n        return result;\n    },\n    rightPad: function (result, size, ch) {\n        result += '';\n        if (!ch) {\n            ch = \" \";\n        }\n        while (result.length < size) {\n            result = result + ch;\n        }\n        return result;\n    },\n    /**\n     * async array processing without blocking the UI (useful when web worker is not available)\n     * @method chunk\n     * @param {Array} items\n     * @param {Function} process\n     * @param {Object} [context]\n     * @param {Function} [callback]\n     */\n    chunk: function timedChunk(items, process, context, callback) {\n        var todo = items.slice(0), i = 0;\n        setTimeout(function worker() {\n            var start = +new Date();\n            do {\n                process.call(context, todo.shift(), i++);\n            } while (todo.length > 0 && (+new Date() - start < 50));\n            if (todo.length > 0) {\n                setTimeout(worker, 25);\n            } else {\n                callback(items);\n            }\n        }, 25);\n    },\n    /**\n     * uppercase the first character\n     * @method ucFirst\n     * @param {String} str\n     * @returns {String}\n     */\n    ucFirst: function (str) {\n        str += '';\n        var f = str.charAt(0).toUpperCase();\n        return f + str.substr(1);\n    },\n    addSlashes: function (str) {\n        return (str + '')\n            .replace(/[\\\\\"']/g, '\\\\$&')\n            .replace(/\\u0000/g, '\\\\0');\n    },\n    applyIf: function applyIf(dest, obj, override) {\n        var key;\n        for (key in obj) {\n            if (obj.hasOwnProperty(key) && (!(key in dest) || override)) {\n                dest[key] = obj[key];\n            }\n        }\n    },\n    /**\n     * @method substitute\n     * @param {String} template\n     * @param {Object|Array} [map] if map is not defined, return a function with predefined template\n     * @param {Function} [transform]\n     * @param {Object} [thisObject] scope\n     * @returns {String|Function}\n     */\n    substitute: function (template, map, transform, thisObject) {\n        var self = this, run = function (data) {\n            return template.replace(/\\$\\{([^\\s\\:\\}]+)(?:\\:([^\\s\\:\\}]+))?\\}/g,\n                function (match, key, format) {\n                    var value = self.getObject(key, false, data);\n                    if (format) {\n                        value = self.getObject(format, false, thisObject).call(thisObject, value, key);\n                    }\n                    return transform(value, key).toString();\n                });\n        };\n        thisObject = thisObject || typeof(window) === 'undefined' ? global : window;\n        transform = transform ?\n            transform.bind(thisObject) : function (v) {\n            return v;\n        };\n        return map ? run(map) : function (map) {\n            return run(map);\n        };\n    },\n    /**\n     * @method taskBuffer\n     * @param {Array.<function(next:function)>} tasks\n     * @param {Object} [scope]\n     * @returns {{on: Function}}\n     */\n    taskBuffer: function taskBuffer(tasks, scope) {\n        var slice = Array.prototype.slice, args = arguments, task, on = {}, error;\n\n        function next() {\n            if (task = tasks.shift()) {\n                task.apply(scope, [next].concat(slice.call(arguments, 0)));\n            } else {\n                on.done && on.done();\n            }\n        }\n\n        next.error = function (err) {\n            error = err || 'unknown error';\n            on.error && on.error(err, tasks);\n        };\n        setTimeout(function () {\n            next.apply(scope, slice.call(args, 2));\n        }, 0);\n        return {\n            on: function (evtName, fnc) {\n                on[evtName] = fnc;\n                if (error) {\n                    on.error && on.error(error, tasks);\n                } else if (tasks.length === 0) {\n                    on.done && on.done();\n                }\n            }\n        }\n    },\n    taskBufferAsync: function (tasks, finished, options) {\n        options = options || {};\n        var total = tasks.length, task;\n        var done = function (err) {\n            total--;\n            if (!total || err) {\n                finished && finished(err);\n            }\n        };\n        var run = function () {\n            if (!tasks.length) {\n                return console.warn(\"taskBufferAsync - no task appending\");\n            }\n            while (task = tasks.shift()) {\n                if ('then' in task) {\n                    task.then(done);\n                } else {\n                    task(done);\n                }\n            }\n        };\n        if (options.standby) {\n            return {\n                run: function () {\n                    return run();\n                }\n            };\n        }\n        return run();\n    },\n    /**\n     * @method shallowMixin\n     * @param {Object} dest\n     * @param {Object} source\n     * @returns {Object}\n     */\n    shallowMixin: function (dest, source) {\n        var keys = Object.keys(source), name;\n        while ((name = keys.shift())) {\n            dest[name] = source[name];\n        }\n        return dest;\n    },\n    /**\n     * @method mixin\n     * @param {Object} dest\n     * @param {Object} source\n     * @param {Function} [cpFunc]\n     * @returns {Object}\n     */\n    mixin: function (dest, source, cpFunc) {\n        var name, s, empty = {};\n        for (name in source) {\n            s = source[name];\n            if (!(name in dest) ||\n                (dest[name] !== s && (!(name in empty) || empty[name] !== s))) {\n                dest[name] = cpFunc ? cpFunc(s) : s;\n            }\n        }\n        return dest;\n    },\n    /**\n     * @method merge\n     * @param {Object} target\n     * @param {Object} source\n     * @param {Boolean} [nonStrict]\n     * @returns {*}\n     */\n    merge: function merge(target, source, nonStrict) {\n        var tval, sval, name;\n        for (name in source) {\n            if (!nonStrict && !source.hasOwnProperty(name)) {\n                continue;\n            }\n            tval = target[name];\n            sval = source[name];\n            if (tval !== sval) {\n                if (tval && typeof tval === 'object' && sval && typeof sval === 'object') {\n                    merge(tval, sval, nonStrict);\n                } else {\n                    target[name] = sval;\n                }\n            }\n        }\n        return target;\n    },\n    /**\n     * according to [The structured clone algorithm](https://developer.mozilla.org/en-US/docs/Web/Guide/DOM/The_structured_clone_algorithm)\n     * @method deepClone\n     * @param {Object} oToBeCloned\n     * @returns {Object}\n     */\n    deepClone: function deepClone(oToBeCloned) {\n        if (!oToBeCloned || typeof oToBeCloned !== \"object\" || typeof(oToBeCloned) === 'function') {\n            // null, undefined, any non-object, or function\n            return oToBeCloned;\t// anything\n        }\n        var oClone, FConstr = oToBeCloned.constructor;\n\n        if (typeof(HTMLElement) !== 'undefined' && oToBeCloned instanceof HTMLElement) {\n            oClone = oToBeCloned.cloneNode(true);\n        } else if (oToBeCloned instanceof RegExp) {\n            oClone = new RegExp(oToBeCloned.source,\n                \"g\".substr(0, Number(oToBeCloned.global)) +\n                \"i\".substr(0, Number(oToBeCloned.ignoreCase)) +\n                \"m\".substr(0, Number(oToBeCloned.multiline)));\n        } else if (oToBeCloned instanceof Date) {\n            oClone = new Date(oToBeCloned.getTime());\n        } else {\n            oClone = FConstr ? new FConstr() : {};\n            for (var sProp in oToBeCloned) {\n                if (!oToBeCloned.hasOwnProperty(sProp)) {\n                    continue;\n                }\n                oClone[sProp] = deepClone(oToBeCloned[sProp]);\n            }\n        }\n        return oClone;\n    },\n    /**\n     * example:\n     *\n     *      isType('Object')({toto:1});\n     *\n     * @method isType\n     * @param {String} compare Object,String,Array,Function, etc.\n     * @returns {Function}\n     */\n    isType: function isType(compare) {\n        if (typeof compare === 'string' && /^\\w+$/.test(compare)) {\n            compare = '[object ' + compare + ']';\n        } else {\n            compare = Object.prototype.toString.call(compare);\n        }\n        return isType[compare] || (isType[compare] = function (o) {\n                return Object.prototype.toString.call(o) === compare;\n            });\n    },\n    /**\n     * guess real type\n     * @method realType\n     * @param str\n     * @returns {*}\n     */\n    realType: function (str) {\n        var xml;\n        if (typeof(str) !== 'string') {\n            return str;\n        }\n        str = str.trim();\n        if (str.trim() === \"\") {\n            return str;\n        }\n        var mapping = ['true', 'false', 'null', 'undefined'];\n        if (+str === 0 || +str) {\n            return +str;\n        }\n        if (!!~mapping.indexOf(str.toLowerCase())) {\n            return eval(str.toLowerCase());\n        }\n        try {\n            return JSON.parse(str);\n        } catch (e) {\n        }\n        xml = new DOMParser().parseFromString(str, 'text/xml');\n        if (!xml.getElementsByTagName('parsererror').length) {\n            return xml;\n        }\n        return str;\n    },\n    /**\n     * @method castType\n     * @param {*} value\n     * @param {String} type\n     * @returns {*}\n     */\n    castType: function (value, type) {\n        var typeMapping = {\n            \"string\": function (s) {\n                return s + \"\";\n            },\n            \"number\": function (n) {\n                return +n;\n            },\n            \"array\": function (arr) {\n                if (Array.isArray(arr)) {\n                    return arr;\n                }\n                try {\n                    var tmp = JSON.parse(arr);\n                    if (Array.isArray(tmp)) {\n                        return tmp;\n                    }\n                } catch (e) {\n\n                }\n                return arr.split(',');\n            },\n            \"boolean\": function (value) {\n                if (!value) {\n                    value = false;\n                } else {\n                    value = ('' + value).toLowerCase();\n                    value = value !== 'false';\n                }\n                return value;\n            },\n            \"object\": function (o) {\n                try {\n                    return JSON.parse(o);\n                } catch (e) {\n                    return null;\n                }\n            },\n            \"xml\": function (str) {\n                return new DOMParser().parseFromString(str, 'text/xml');\n            }\n        };\n        if (arguments.length === 0) {\n            return typeMapping;\n        }\n        return typeMapping[type] && typeMapping[type](value);\n    },\n    /**\n     * @method getProp\n     * @param {Array} parts\n     * @param {Boolean} create\n     * @param {Object} context\n     * @return Object\n     */\n    getProp: function (parts, create, context) {\n        var obj = context || window;\n        for (var i = 0, p; obj && (p = parts[i]); i++) {\n            obj = (p in obj ? obj[p] : (create ? obj[p] = {} : undefined));\n        }\n        return obj; // mixed\n    },\n    /**\n     * @method getObject\n     * @param {String} name\n     * @param {Boolean} create\n     * @param {Object} context\n     * @return Object\n     */\n    getObject: function (name, create, context) {\n        return this.getProp(name.split(\".\"), create, context); // Object\n    },\n\n    /**\n     * create a function with partial params\n     *\n     *      var fnc1 = function(a,b,c){return a+b+c;}, undef = {}.undef;\n     *      var fnc2 = partial(fnc1,null,undef,2,undef);\n     *      fnc2(1,3); //returns 6\n     *      fnc2(1,1); //returns 4\n     *\n     * @method partial\n     * @param {Function} fn\n     * @param {Object} [scope]\n     * @returns {Function}\n     */\n    partial: function partial(fn, scope) {\n\n        var args = slice.call(arguments, 2);\n        return function () {\n            var arg = 0, i = 0, l = args.length;\n            for (; i < l && arg < arguments.length; i++)\n                if (args[i] === undefined)\n                    args[i] = arguments[arg++];\n            return fn.apply(scope, args);\n        };\n    },\n    queryToObject: function (query, separator) {\n        separator = separator || '&';\n        query = query.trim();\n        if (!query) {\n            return;\n        }\n        var params = {};\n        query.split(separator).forEach(function (part) {\n            part = part.trim();\n            if (!part) {\n                return;\n            }\n            var p = part.split('=');\n            params[p[0].trim()] = p[1].trim();\n        });\n        return params;\n    },\n    objectToQuery: function (obj, separator, fromJson) {\n        separator = separator || '&';\n        var query = [];\n        Object.keys(obj).forEach(function (k) {\n            var o = obj[k], tmp;\n            if (typeof(o) === 'object' && fromJson) {\n                try {\n                    tmp = JSON.stringify(o);\n                } catch (e) {\n                    //\n                }\n                if (tmp !== undefined) {\n                    o = encodeURIComponent(tmp);\n                }\n            }\n            query.push(k + '=' + o);\n        });\n        return query.join(separator);\n    },\n    /**\n     * Return an a object with the url being parsed and fully qualified\n     * @param url to parse\n     * @param baseUrl [optional] a base url to use to fully qualify the url\n     */\n    parseUrl: function (url, baseUrl) {\n        var a = document.createElement('a');\n        // testons d'abord que l'url ne contient pas dj  les doubles ://\n        if (!/:\\/\\//.test(url)) {\n            a.href = baseUrl ? baseUrl : location.href;\n        }\n        a.href += url;\n\n        return {\n            hash: a.hash,\n            host: a.host,\n            hostname: a.hostname,\n            href: a.href,\n            pathname: a.pathname,\n            port: a.port,\n            protocol: a.protocol,\n            search: a.search\n        };\n    },\n    htmlentities: function htmlentities(string, quote_style, charset, double_encode) {\n        //  discuss at: http://phpjs.org/functions/htmlentities/\n        // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // improved by: nobbler\n        // improved by: Jack\n        // improved by: Rafa Kukawski (http://blog.kukawski.pl)\n        // improved by: Dj (http://phpjs.org/functions/htmlentities:425#comment_134018)\n        // bugfixed by: Onno Marsman\n        // bugfixed by: Brett Zamir (http://brett-zamir.me)\n        //    input by: Ratheous\n        //  depends on: get_html_translation_table\n        //   example 1: htmlentities('Kevin & van Zonneveld');\n        //   returns 1: 'Kevin &amp; van Zonneveld'\n        //   example 2: htmlentities(\"foo'bar\",\"ENT_QUOTES\");\n        //   returns 2: 'foo&#039;bar'\n\n        var hash_map = this.get_html_translation_table('HTML_ENTITIES', quote_style),\n            symbol = '';\n        string = string == null ? '' : string + '';\n\n        if (!hash_map) {\n            return false;\n        }\n\n        if (quote_style && quote_style === 'ENT_QUOTES') {\n            hash_map[\"'\"] = '&#039;';\n        }\n\n        if (!!double_encode || double_encode == null) {\n            for (symbol in hash_map) {\n                if (hash_map.hasOwnProperty(symbol)) {\n                    string = string.split(symbol)\n                        .join(hash_map[symbol]);\n                }\n            }\n        } else {\n            string = string.replace(/([\\s\\S]*?)(&(?:#\\d+|#x[\\da-f]+|[a-zA-Z][\\da-z]*);|$)/g, function (ignore, text, entity) {\n                for (symbol in hash_map) {\n                    if (hash_map.hasOwnProperty(symbol)) {\n                        text = text.split(symbol)\n                            .join(hash_map[symbol]);\n                    }\n                }\n\n                return text + entity;\n            });\n        }\n\n        return string;\n    },\n    get_html_translation_table: function get_html_translation_table(table, quote_style) {\n        //  discuss at: http://phpjs.org/functions/get_html_translation_table/\n        // original by: Philip Peterson\n        //  revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n        // bugfixed by: noname\n        // bugfixed by: Alex\n        // bugfixed by: Marco\n        // bugfixed by: madipta\n        // bugfixed by: Brett Zamir (http://brett-zamir.me)\n        // bugfixed by: T.Wild\n        // improved by: KELAN\n        // improved by: Brett Zamir (http://brett-zamir.me)\n        //    input by: Frank Forte\n        //    input by: Ratheous\n        //        note: It has been decided that we're not going to add global\n        //        note: dependencies to php.js, meaning the constants are not\n        //        note: real constants, but strings instead. Integers are also supported if someone\n        //        note: chooses to create the constants themselves.\n        //   example 1: get_html_translation_table('HTML_SPECIALCHARS');\n        //   returns 1: {'\"': '&quot;', '&': '&amp;', '<': '&lt;', '>': '&gt;'}\n\n        var entities = {},\n            hash_map = {},\n            decimal;\n        var constMappingTable = {},\n            constMappingQuoteStyle = {};\n        var useTable = {},\n            useQuoteStyle = {};\n\n        // Translate arguments\n        constMappingTable[0] = 'HTML_SPECIALCHARS';\n        constMappingTable[1] = 'HTML_ENTITIES';\n        constMappingQuoteStyle[0] = 'ENT_NOQUOTES';\n        constMappingQuoteStyle[2] = 'ENT_COMPAT';\n        constMappingQuoteStyle[3] = 'ENT_QUOTES';\n\n        useTable = !isNaN(table) ? constMappingTable[table] : table ? table.toUpperCase() : 'HTML_SPECIALCHARS';\n        useQuoteStyle = !isNaN(quote_style) ? constMappingQuoteStyle[quote_style] : quote_style ? quote_style.toUpperCase() :\n            'ENT_COMPAT';\n\n        if (useTable !== 'HTML_SPECIALCHARS' && useTable !== 'HTML_ENTITIES') {\n            throw new Error('Table: ' + useTable + ' not supported');\n            // return false;\n        }\n\n        entities['38'] = '&amp;';\n        if (useTable === 'HTML_ENTITIES') {\n            entities['160'] = '&nbsp;';\n            entities['161'] = '&iexcl;';\n            entities['162'] = '&cent;';\n            entities['163'] = '&pound;';\n            entities['164'] = '&curren;';\n            entities['165'] = '&yen;';\n            entities['166'] = '&brvbar;';\n            entities['167'] = '&sect;';\n            entities['168'] = '&uml;';\n            entities['169'] = '&copy;';\n            entities['170'] = '&ordf;';\n            entities['171'] = '&laquo;';\n            entities['172'] = '&not;';\n            entities['173'] = '&shy;';\n            entities['174'] = '&reg;';\n            entities['175'] = '&macr;';\n            entities['176'] = '&deg;';\n            entities['177'] = '&plusmn;';\n            entities['178'] = '&sup2;';\n            entities['179'] = '&sup3;';\n            entities['180'] = '&acute;';\n            entities['181'] = '&micro;';\n            entities['182'] = '&para;';\n            entities['183'] = '&middot;';\n            entities['184'] = '&cedil;';\n            entities['185'] = '&sup1;';\n            entities['186'] = '&ordm;';\n            entities['187'] = '&raquo;';\n            entities['188'] = '&frac14;';\n            entities['189'] = '&frac12;';\n            entities['190'] = '&frac34;';\n            entities['191'] = '&iquest;';\n            entities['192'] = '&Agrave;';\n            entities['193'] = '&Aacute;';\n            entities['194'] = '&Acirc;';\n            entities['195'] = '&Atilde;';\n            entities['196'] = '&Auml;';\n            entities['197'] = '&Aring;';\n            entities['198'] = '&AElig;';\n            entities['199'] = '&Ccedil;';\n            entities['200'] = '&Egrave;';\n            entities['201'] = '&Eacute;';\n            entities['202'] = '&Ecirc;';\n            entities['203'] = '&Euml;';\n            entities['204'] = '&Igrave;';\n            entities['205'] = '&Iacute;';\n            entities['206'] = '&Icirc;';\n            entities['207'] = '&Iuml;';\n            entities['208'] = '&ETH;';\n            entities['209'] = '&Ntilde;';\n            entities['210'] = '&Ograve;';\n            entities['211'] = '&Oacute;';\n            entities['212'] = '&Ocirc;';\n            entities['213'] = '&Otilde;';\n            entities['214'] = '&Ouml;';\n            entities['215'] = '&times;';\n            entities['216'] = '&Oslash;';\n            entities['217'] = '&Ugrave;';\n            entities['218'] = '&Uacute;';\n            entities['219'] = '&Ucirc;';\n            entities['220'] = '&Uuml;';\n            entities['221'] = '&Yacute;';\n            entities['222'] = '&THORN;';\n            entities['223'] = '&szlig;';\n            entities['224'] = '&agrave;';\n            entities['225'] = '&aacute;';\n            entities['226'] = '&acirc;';\n            entities['227'] = '&atilde;';\n            entities['228'] = '&auml;';\n            entities['229'] = '&aring;';\n            entities['230'] = '&aelig;';\n            entities['231'] = '&ccedil;';\n            entities['232'] = '&egrave;';\n            entities['233'] = '&eacute;';\n            entities['234'] = '&ecirc;';\n            entities['235'] = '&euml;';\n            entities['236'] = '&igrave;';\n            entities['237'] = '&iacute;';\n            entities['238'] = '&icirc;';\n            entities['239'] = '&iuml;';\n            entities['240'] = '&eth;';\n            entities['241'] = '&ntilde;';\n            entities['242'] = '&ograve;';\n            entities['243'] = '&oacute;';\n            entities['244'] = '&ocirc;';\n            entities['245'] = '&otilde;';\n            entities['246'] = '&ouml;';\n            entities['247'] = '&divide;';\n            entities['248'] = '&oslash;';\n            entities['249'] = '&ugrave;';\n            entities['250'] = '&uacute;';\n            entities['251'] = '&ucirc;';\n            entities['252'] = '&uuml;';\n            entities['253'] = '&yacute;';\n            entities['254'] = '&thorn;';\n            entities['255'] = '&yuml;';\n        }\n\n        if (useQuoteStyle !== 'ENT_NOQUOTES') {\n            entities['34'] = '&quot;';\n        }\n        if (useQuoteStyle === 'ENT_QUOTES') {\n            entities['39'] = '&#39;';\n        }\n        entities['60'] = '&lt;';\n        entities['62'] = '&gt;';\n\n        // ascii decimals to real symbols\n        for (decimal in entities) {\n            if (entities.hasOwnProperty(decimal)) {\n                hash_map[String.fromCharCode(decimal)] = entities[decimal];\n            }\n        }\n\n        return hash_map;\n    },\n    /**\n     * support commonjs and promise\n     * @method async\n     * @param {Function} makeGenerator a generator function which returns promise\n     * @returns {Function}\n     */\n    async: function async(makeGenerator) {\n        return function () {\n            var generator = makeGenerator.apply(this, arguments);\n            function handle(result) { // { done: [Boolean], value: [Object] }\n                if (result.done) {\n                    return result.value;\n                }\n                if (result.value.then) {\n                    return result.value.then(function (res) {\n                        return handle(generator.next(res));\n                    }, function (err) {\n                        return handle(generator.throw(err));\n                    });\n                } else {\n                    return result.value(function (err, res) {\n                        if (err) {\n                            handle(generator.throw(err));\n                        } else {\n                            handle(generator.next(res));\n                        }\n                    });\n                }\n            }\n            return handle(generator.next());\n        }\n    }\n};\n"],"sourceRoot":"/source/"}