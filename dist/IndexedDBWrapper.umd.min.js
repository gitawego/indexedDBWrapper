!function(e,t){if("function"==typeof define&&define.amd)define("BaseEvented",["exports","module","./CustomEvent","./helper"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./CustomEvent"),require("./helper"));else{var n={exports:{}};t(n.exports,n,e.CustomEvent,e.helper),e.BaseEvented=n.exports}}(this,function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=i(n),u=Array.prototype.slice,c=function(){function e(){o(this,e),this.event=new s["default"],r.helper.applyIf(this,{evts:{},connect:[],config:{}})}return a(e,[{key:"on",value:function(e,t,n){return this.event[n?"once":"on"](e,t.bind(this))}},{key:"once",value:function(e,t){return this.on(e,t.bind(this),!0)}},{key:"emit",value:function(){return this.event.emit.apply(this.event,arguments)}},{key:"broadcast",value:function(){return this.event.broadcast.apply(this.event,arguments)}},{key:"set",value:function(e,t){if("config"===e)return this.setConfigs(t);if(!(e in this&&this[e]===t)){var n={newValue:t};e in this&&(n.oldValue=isObject(this[e])?r.helper.deepClone(this[e]):this[e]),this[e]=t,this.emit(e,n)}}},{key:"setConfigs",value:function(e){Object.keys(e).forEach(function(t){this.setConfig(t,e[t])},this)}},{key:"setConfig",value:function(e,t){if(1===arguments.length)return this.setConfigs(e);if(!(e in this.config&&this.config[e]===t)){var n={key:e,newValue:t};e in this.config&&(n.oldValue=isObject(this.config[e])?r.helper.deepClone(this.config[e]):this.config[e]),this.config[e]=t,this.emit("config",n),this.emit("config/"+e,n)}}},{key:"getConfig",value:function(e){var t=this.config[e],n=e+"Getter";return this.config[n]?this.config[n](t,this):t}},{key:"removeEvts",value:function(e){e.forEach(function(e){this.evts[e]&&(this.evts[e].remove(),delete this.evts[e])},this)}},{key:"destroy",value:function(){this.connect.forEach(function(e){e.remove()}),this.connect.length=0,Object.keys(this.evts).forEach(function(e){this.evts[e].remove()},this),this.evts={},this.event.purgeListeners(),this.$purgeSuper&&this.$purgeSuper()}}]),e}();t.exports=c,c.eventize=function(e){e.event=new s["default"],r.helper.applyIf(e,{evts:{},connect:[],config:{}});var t=c.prototype,n={};return Object.keys(t).forEach(function(r){r in e&&"function"==typeof e[r]?n[r]=t[r]:e[r]=t[r]}),e.$super=function(e){return n[e]&&n[e].apply(this,u.call(arguments,1))},e.$purgeSuper=function(){n=null},e}}),function(e,t){if("function"==typeof define&&define.amd)define("CustomEvent",["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.CustomEvent=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Array.prototype.slice,o="undefined"!=typeof window?window:global,a="undefined"!=typeof o.crypto&&"undefined"!=typeof o.crypto.getRandomValues?function(){var e=new Uint16Array(8);o.crypto.getRandomValues(e);var t=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return t(e[0])+t(e[1])+"-"+t(e[2])+"-"+t(e[3])+"-"+t(e[4])+"-"+t(e[5])+t(e[6])+t(e[7])}:function(e){e=e||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";var t=(new Date).getTime();return e.replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:7&n|8).toString(16)})},s=function(e,t){var n,r,i={};for(n in t)r=t[n],n in e&&(e[n]===r||n in i&&i[n]===r)||(e[n]=r);return e},u=function(){function e(t){n(this,e),this._listeners={},this.channelSeparator="/",t&&s(this,t)}return r(e,[{key:"buildListener",value:function(e){var t="#Listener:"+a();return"function"==typeof e?e={id:t,content:e}:e.id||(e.id=t),e}},{key:"on",value:function(e,t){var n=this;if("undefined"==typeof this._listeners[e]&&(this._listeners[e]=[]),t=this.buildListener(t),this.hasListener(e,t.id))throw new Error("listener id "+t.id+" duplicated");return this._listeners[e].push(t),{remove:function(){return n.off(e,t.id)},id:t.id}}},{key:"once",value:function(e,t){var n=this;t=this.buildListener(t);var r=t.content;return t.content=function(){n.off(e,t.id),r.apply(n,arguments)},this.on(e,t)}},{key:"when",value:function(e,t){function n(){t.apply(this,arguments)&&r.off(e,n)}var r=this;return n.listener=t,r.on(e,n),this}},{key:"broadcast",value:function(e){for(var t=i.call(arguments,1),n=this.getEventNamesByWildcard(e),r=0,o=n.length,a=[];o>r;r++)a.push(this.emit.apply(this,[n[r]].concat(t)));return a}},{key:"getEventNamesByWildcard",value:function(e){var t=[],n=this,r=e.replace(/(\?)/g,function(){return"[\\w'-]{1}"}).replace(/\*/g,function(e,t,r){return""!==r.charAt(t+1)?"([\\S\\s][^"+n.channelSeparator+"]*)":".*?"});return JSON.stringify(Object.keys(this._listeners)).replace(new RegExp('"('+r+')"',"g"),function(e,n){t.push(n)}),t}},{key:"emit",value:function(e){var t,n,r,o=[];if(!e)throw new Error("Event object missing 'eventName' property.");if(t=i.call(arguments,1),this._listeners[e]instanceof Array)for(n=this._listeners[e],r=n.length;r--;)n[r]&&o.push({id:n[r].id,result:n[r].content.apply(this,t)});return o}},{key:"emitTo",value:function(e,t){if(!e)throw new Error("Event object missing 'eventName' property.");var n,r,o=i.call(arguments,2),a=[];if(this._listeners[e]instanceof Array){for(n=this._listeners[e],r=n.length;r--;)if(n[r]&&n[r].id===t){a.push({id:t,result:n[r].content.apply(this,o)});break}if(t&&!a.length)throw new Error("listener "+t+" is not found in event "+e)}return a}},{key:"off",value:function(e,t){var n;(n=this.hasListener(e,t))&&this._listeners[e].splice(n.index,1)}},{key:"hasEvent",value:function(e){return e?e in this._listeners:Object.keys(this._listeners).length>0}},{key:"eventList",value:function(){return Object.keys(this._listeners)}},{key:"hasListener",value:function(e,t){var n,r,i="string"==typeof t?"id":"content",o=0;if((n=this._listeners[e])&&(r=n.length)>0)for(;r>o;o++)if(n[o][i]===t)return{index:o};return null}},{key:"hasListeners",value:function(e){return this._listeners[e]instanceof Array?this._listeners[e].length>0:!1}},{key:"getListeners",value:function(e){return this._listeners[e]instanceof Array?this._listeners[e]:void 0}},{key:"purgeListeners",value:function(e){e?delete this._listeners[e]:(delete this._listeners,this._listeners={})}}]),e}();t.exports=u}),function(e,t){if("function"==typeof define&&define.amd)define("IDBStore",["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.IDBStore=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.db=t,this.storeName=r}return r(e,[{key:"clear",value:function(){var e=this.db.getStore(this.storeName,"readwrite");return new Promise(function(t,n){var r=e.clear();r.onsuccess=t,r.onerror=function(e){n(e.target.error)}})}},{key:"drop",value:function(){var e=this;return new Promise(function(t,n){var r=e.db.getStore(e.storeName,"readwrite"),i=r["delete"]();i.onsuccess=t,i.onerror=function(e){n(e.target.error)}})}},{key:"insert",value:function(e){var t=this.db.getStore(this.storeName,"readwrite"),n=t.add(e);return new Promise(function(r,i){n.onsuccess=function(){e[t.keyPath]=this.result,r(e)},n.onerror=function(e){i(e.target.error)}})}},{key:"openTransaction",value:function(e){return this.db.openTransaction(this.storeName,e)}},{key:"upsert",value:function(e,t,n){var r,i=this,o=[];return new Promise(function(a,s){i.query(e,{openMode:"readwrite",onCursor:function(e,a,s){r=!0,n&&(t=i.db.mergeData(e.value,t)),t[s.keyPath]=e.primaryKey,o.push(i.cursorOperation(e,"update",t))}}).then(function(){if(!r){var e=i.db.getStore(i.storeName,"readwrite");o.push(new Promise(function(n,r){var i=e.add(t);i.onsuccess=function(){t[e.keyPath]=this.result,n(t)},i.onerror=r}))}return o.length?void Promise.all(o).then(a,s):a()},s)})}},{key:"bulk",value:function(e){return this.db.bulk(e,this.storeName)}},{key:"removeByKey",value:function(e){var t=this.db.getStore(this.storeName,"readwrite"),n=t["delete"](e);return new Promise(function(e,t){n.onsuccess=function(){e(this.result)},n.onerror=function(e){t(e.target.error)}})}},{key:"remove",value:function(e){var t=this,n=[];return new Promise(function(r,i){t.query(e,{openMode:"readwrite",onCursor:function(e){e&&n.push(t.cursorOperation(e,"delete"))}}).then(function(){return n.length?void Promise.all(n).then(r,i):r()},i)})}},{key:"cursorOperation",value:function(e,t,n){return new Promise(function(r,i){var o;o="delete"!==t?e[t](n):e[t](),o.onsuccess=function(){r(this.source.value)},o.onerror=function(e){i(e.target.error)}})}},{key:"findByKey",value:function(e){var t=this.db.getStore(this.storeName,"readwrite").get(e);return new Promise(function(e,n){t.onsuccess=function(){e(this.result)},t.onerror=function(e){n(e.target.error)}})}},{key:"buildRange",value:function(e){var t;return e=e||{},"eq"in e?t=IDBKeyRange.only(e.eq):"gte"in e&&"lte"in e?t=IDBKeyRange.bound(e.gte,e.lte,!0,!0):"gte"in e&&"lt"in e?t=IDBKeyRange.bound(e.gte,e.lt,!0,!1):"gt"in e&&"lt"in e?t=IDBKeyRange.bound(e.gt,e.lt,!1,!1):"gt"in e&&"lte"in e?t=IDBKeyRange.bound(e.gt,e.lte,!1,!0):"gt"in e?t=IDBKeyRange.lowerBound(e.gt):"gte"in e?t=IDBKeyRange.lowerBound(e.gte,!0):"lt"in e?t=IDBKeyRange.upperBound(e.lt):"lte"in e&&(t=IDBKeyRange.upperBound(e.lte,!0)),t}},{key:"findOne",value:function(e){var t=this;return new Promise(function(n,r){t.query(e,{onCursor:function(){return!1}}).then(function(e){n(e[0])},r)})}},{key:"find",value:function(e){return this.query(e)}},{key:"query",value:function(e,t){t=t||{},t.openMode=t.openMode||"readonly",e=e||{},e.order=e.order||"next";var n,r,i,o=this.openTransaction(t.openMode),a=o.objectStore(this.storeName),s=this,u=[];i=this.buildRange(e),n=a,i?e.index&&a.indexNames.contains(e.index)?(n=a.index(e.index),r=n.openCursor(i,e.order)):r=n.openCursor(i,e.order):r=n.openCursor();var c=new Promise(function(i,o){r.onsuccess=function(r){var o=r.target.result,c=!0;if(o){if(e.filter&&!s.queryFilter(e.filter,o))return o["continue"]();t.onCursor&&(c=t.onCursor(o,n,a)!==!1),u.push(o.value),c?o["continue"]():i(u)}else i(u)},r.onerror=function(e){o(e.target.error)}});return c.abort=function(){"done"!==r.readyState&&o.abort()},c}},{key:"queryFilter",value:function(e,t){if("function"==typeof e)return e(t);var n=t.value;return new Function("$record","return "+e.join(" && ")+" ;")(n)}}]),e}();t.exports=i}),function(e,t){if("function"==typeof define&&define.amd)define("IndexedDBWrapper",["exports","module","./BaseEvented","./helper","./IDBStore"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./BaseEvented"),require("./helper"),require("./IDBStore"));else{var n={exports:{}};t(n.exports,n,e.BaseEvented,e.helper,e.IDBStore),e.IndexedDBWrapper=n.exports}}(this,function(e,t,n,r,i){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;s=c=u=void 0,r=!1;var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(a)}var c=Object.getPrototypeOf(i);if(null===c)return void 0;e=c,t=o,n=a,r=!0}},f=o(n),l=o(i),d=function(e){function t(e){a(this,t),c(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.config={dbName:"",version:1,stores:{},operatorMapping:{eq:"=",gt:">",gte:">=",lt:"<",lte:"<="},forceShim:!1,timeFormat:/^(\d{4})(-(\d{2}))??(-(\d{2}))??(T(\d{2}):(\d{2})(:(\d{2}))??(\.(\d+))??(([\+\-]{1}\d{2}:\d{2})|Z)??)??$/,schema:{}},e&&r.helper.mixin(this.config,e)}return s(t,e),u(t,[{key:"indexedDB",value:function(){return window.indexedDB||window.msIndexedDB||window.mozIndexedDB||window.webkitIndexedDB}},{key:"open",value:function(e){var t=this,n=this;return this.config.dbName=e.dbName,this.config.version=e.version,new Promise(function(r,i){var o=t.indexedDB().open(t.config.dbName,t.config.version);o.onsuccess=function(){n.db=this.result,n.db.onerror=function(e){n.emit("error",e.target.error.message)},r(n.db)},o.onerror=function(e){i(e.target.error)},o.onupgradeneeded=function(t){if(n.db=this.result,!e.schema||0===e.schema.length)throw new Error("no schema defined, can not upgrade");t.oldVersion>=e.schema[e.schema.length-1].version||(n.config.oldVersion=t.oldVersion,n.schema(e.schema))}})}},{key:"schema",value:function(e){this.config.schema=e,e.forEach(function(e){e.version>this.config.oldVersion&&this._schema(e.schema)},this)}},{key:"_schema",value:function(e){var t=this.db;Object.keys(e).forEach(function(n){var r,i=e[n];t.objectStoreNames.contains(n)?(r=t.transaction([n],"readwrite").objectStore(n),i.alter&&i.alter.forEach(function(e){e.param?r[e.action].apply(r,e.param):r[e.action]()})):r=t.createObjectStore(n,i.keyPath),i.indexes&&Object.keys(i.indexes).forEach(function(e){var t=i.indexes[e];r.createIndex(e,t.index,{unique:t.unique})})},this)}},{key:"store",value:function(e){return this.config.stores[e]?this.config.stores[e]:this.db.objectStoreNames.contains(e)?this.config.stores[e]=new l["default"](this,e):void 0}},{key:"bulk",value:function(e,t){var n=this,r=this;return new Promise(function(i,o){function a(e){var n;if(e&&f.push(this.result),u.length)if(s=u.shift(),"upsert"===s.method){if(s.data.index){if(!c.indexNames.contains(s.data.index))return o(new Error("index name not found"));s.data.key||(s.data.key=s.data.index),n=c.index(s.data.index).get(Array.isArray(s.data.key)?s.data.key.map(function(e){return s.data.data[e]}):s.data.data[s.data.key])}else n=c.get(s.data.data[c.keyPath]);n.onsuccess=function(){this.result&&(s.data.merge?s.data.data=r.mergeData(this.result,s.data.data):(s.data.key&&(Array.isArray(s.data.key)?s.data.key.forEach(function(e){s.data.data[e]=this.result[e]},this):s.data.data[s.data.key]=this.result[s.data.key]),s.data.data[c.keyPath]=this.result[c.keyPath])),c.put(s.data.data).onsuccess=a}}else n=s.index?c.index(s.index)[s.method](s.data):c[s.method](s.data),n.onsuccess=a;else i({results:f,store:t})}var s,u=[],c=n.getStore(t,"readwrite",{onerror:function(e){var t=e.target.error;t.item=s,o(t)}}),f=[];Array.isArray(e)?u=e:Object.keys(e).forEach(function(t){u=u.concat(e[t].map(function(e){return{method:t,data:e}}))}),a()})}},{key:"getStore",value:function(e,t,n){var r=this.openTransaction(e,t,n);return r.objectStore(e)}},{key:"mergeData",value:function(e,t){return Object.keys(t).forEach(function(n){null===t[n]?delete e[n]:e[n]=t[n]}),e}},{key:"openTransaction",value:function(e,t,n){n=n||{};var r=this.db.transaction(e,t);return"oncomplete"in n&&(r.oncomplete=n.oncomplete),"onabort"in n&&(r.onabort=n.onabort),"onerror"in n&&(r.onerror=n.onerror),r}},{key:"dropDB",value:function(){return this.close(),this.indexedDB().deleteDatabase(this.config.dbName)}},{key:"close",value:function(){return this.db.close()}}]),t}(f["default"]);t.exports=d}),function(e,t){if("function"==typeof define&&define.amd)define("helper",["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.helper=n.exports}}(this,function(exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var slice=Array.prototype.slice,helper={sandbox:function(e,t,n){n=n||{};var r,i,o,a,s,u,c=["window","document","alert","location","openDatabase","indexedDB","console","close","setTimeout","setInterval","open","localStorage","sessionStorage","parent","self","addEventListener","dispatchEvent","postMessage","WebSocket","Blob","require","define","$"].concat(n.restrictedVars||[]),f=e.length,l=0,d=new Array(c.length),h=Array.prototype.splice;if(n.shim)for(s=Object.keys(n.shim),a=s.length;a>l;l++)u=s[l],o=c.indexOf(u),-1!==o&&d.splice(o,1,n.shim[u]);return e=e.concat(c),r=new Function(e.join(","),t),function(){return i=h.call(arguments,0,f),i=i.concat(d),r.apply(n.scope||{},i)}},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments;clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(i,o)},t),n&&!r&&e.apply(i,o)}},randomIntFromInterval:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},throttle:function(e,t){var n=0;return function(){var r=+new Date;if(!(t>r-n))return n=r,e.apply(this,arguments)}},leftPad:function(e,t,n){for(e+="",n||(n=" ");e.length<t;)e=n+e;return e},rightPad:function(e,t,n){for(e+="",n||(n=" ");e.length<t;)e+=n;return e},chunk:function(e,t,n,r){var i=e.slice(0),o=0;setTimeout(function a(){var s=+new Date;do t.call(n,i.shift(),o++);while(i.length>0&&+new Date-s<50);i.length>0?setTimeout(a,25):r(e)},25)},ucFirst:function(e){e+="";var t=e.charAt(0).toUpperCase();return t+e.substr(1)},addSlashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},applyIf:function(e,t,n){var r;for(r in t)!t.hasOwnProperty(r)||r in e&&!n||(e[r]=t[r])},substitute:function(e,t,n,r){var i=this,o=function(t){return e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,o,a){var s=i.getObject(o,!1,t);return a&&(s=i.getObject(a,!1,r).call(r,s,o)),n(s,o).toString()})};return r=r||"undefined"==typeof window?global:window,n=n?n.bind(r):function(e){return e},t?o(t):function(e){return o(e)}},taskBuffer:function(e,t){function n(){(r=e.shift())?r.apply(t,[n].concat(o.call(arguments,0))):s.done&&s.done()}var r,i,o=Array.prototype.slice,a=arguments,s={};return n.error=function(t){i=t||"unknown error",s.error&&s.error(t,e)},setTimeout(function(){n.apply(t,o.call(a,2))},0),{on:function(t,n){s[t]=n,i?s.error&&s.error(i,e):0===e.length&&s.done&&s.done()}}},taskBufferAsync:function(e,t,n){n=n||{};var r,i=e.length,o=function(e){i--,(!i||e)&&t&&t(e)},a=function(){if(!e.length)return void 0;for(;r=e.shift();)"then"in r?r.then(o):r(o)};return n.standby?{run:function(){return a()}}:a()},shallowMixin:function(e,t){for(var n,r=Object.keys(t);n=r.shift();)e[n]=t[n];return e},mixin:function(e,t,n){var r,i,o={};for(r in t)i=t[r],r in e&&(e[r]===i||r in o&&o[r]===i)||(e[r]=n?n(i):i);return e},merge:function e(t,n,r){var i,o,a;for(a in n)(r||n.hasOwnProperty(a))&&(i=t[a],o=n[a],i!==o&&(i&&"object"==typeof i&&o&&"object"==typeof o?e(i,o,r):t[a]=o));return t},deepClone:function t(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;var n,r=e.constructor;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)n=e.cloneNode(!0);else if(e instanceof RegExp)n=new RegExp(e.source,"g".substr(0,Number(e.global))+"i".substr(0,Number(e.ignoreCase))+"m".substr(0,Number(e.multiline)));else if(e instanceof Date)n=new Date(e.getTime());else{n=r?new r:{};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i]))}return n},isType:function n(e){return e="string"==typeof e&&/^\w+$/.test(e)?"[object "+e+"]":Object.prototype.toString.call(e),n[e]||(n[e]=function(t){return Object.prototype.toString.call(t)===e})},realType:function realType(str){var xml;if("string"!=typeof str)return str;if(str=str.trim(),""===str.trim())return str;var mapping=["true","false","null","undefined"];if(0===+str||+str)return+str;if(~mapping.indexOf(str.toLowerCase()))return eval(str.toLowerCase());try{return JSON.parse(str)}catch(e){}return xml=(new DOMParser).parseFromString(str,"text/xml"),xml.getElementsByTagName("parsererror").length?str:xml},castType:function(e,t){var n={string:function(e){return e+""},number:function(e){return+e},array:function(e){if(Array.isArray(e))return e;try{var t=JSON.parse(e);if(Array.isArray(t))return t}catch(n){}return e.split(",")},"boolean":function(e){return e?(e=(""+e).toLowerCase(),e="false"!==e):e=!1,e},object:function(e){try{return JSON.parse(e)}catch(t){return null}},xml:function(e){return(new DOMParser).parseFromString(e,"text/xml")}};return 0===arguments.length?n:n[t]&&n[t](e)},getProp:function(e,t,n){for(var r,i=n||window,o=0;i&&(r=e[o]);o++)i=r in i?i[r]:t?i[r]={}:void 0;return i},getObject:function(e,t,n){return this.getProp(e.split("."),t,n)},partial:function(e,t){var n=slice.call(arguments,2);return function(){for(var r=0,i=0,o=n.length;o>i&&r<arguments.length;i++)void 0===n[i]&&(n[i]=arguments[r++]);return e.apply(t,n)}},queryToObject:function(e,t){if(t=t||"&",e=e.trim()){var n={};return e.split(t).forEach(function(e){if(e=e.trim()){var t=e.split("=");n[t[0].trim()]=t[1].trim()}}),n}},objectToQuery:function(e,t,n){t=t||"&";var r=[];return Object.keys(e).forEach(function(t){var i,o=e[t];if("object"==typeof o&&n){try{i=JSON.stringify(o)}catch(a){}void 0!==i&&(o=encodeURIComponent(i))}r.push(t+"="+o)}),r.join(t)},parseUrl:function(e,t){var n=document.createElement("a");return/:\/\//.test(e)||(n.href=t?t:location.href),n.href+=e,{hash:n.hash,host:n.host,hostname:n.hostname,href:n.href,pathname:n.pathname,port:n.port,protocol:n.protocol,search:n.search}},htmlentities:function(e,t,n,r){var i=this.get_html_translation_table("HTML_ENTITIES",t),o="";if(e=null==e?"":e+"",!i)return!1;if(t&&"ENT_QUOTES"===t&&(i["'"]="&#039;"),r||null==r)for(o in i)i.hasOwnProperty(o)&&(e=e.split(o).join(i[o]));else e=e.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(e,t,n){for(o in i)i.hasOwnProperty(o)&&(t=t.split(o).join(i[o]));return t+n});return e},get_html_translation_table:function(e,t){var n,r={},i={},o={},a={},s={},u={};if(o[0]="HTML_SPECIALCHARS",o[1]="HTML_ENTITIES",a[0]="ENT_NOQUOTES",a[2]="ENT_COMPAT",a[3]="ENT_QUOTES",s=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":o[e],u=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":a[t],"HTML_SPECIALCHARS"!==s&&"HTML_ENTITIES"!==s)throw new Error("Table: "+s+" not supported");r[38]="&amp;","HTML_ENTITIES"===s&&(r[160]="&nbsp;",r[161]="&iexcl;",r[162]="&cent;",r[163]="&pound;",r[164]="&curren;",r[165]="&yen;",r[166]="&brvbar;",r[167]="&sect;",r[168]="&uml;",r[169]="&copy;",r[170]="&ordf;",r[171]="&laquo;",r[172]="&not;",r[173]="&shy;",r[174]="&reg;",r[175]="&macr;",r[176]="&deg;",r[177]="&plusmn;",r[178]="&sup2;",r[179]="&sup3;",r[180]="&acute;",r[181]="&micro;",r[182]="&para;",r[183]="&middot;",r[184]="&cedil;",r[185]="&sup1;",r[186]="&ordm;",r[187]="&raquo;",r[188]="&frac14;",r[189]="&frac12;",r[190]="&frac34;",r[191]="&iquest;",r[192]="&Agrave;",r[193]="&Aacute;",r[194]="&Acirc;",r[195]="&Atilde;",r[196]="&Auml;",r[197]="&Aring;",r[198]="&AElig;",r[199]="&Ccedil;",r[200]="&Egrave;",r[201]="&Eacute;",r[202]="&Ecirc;",r[203]="&Euml;",r[204]="&Igrave;",r[205]="&Iacute;",r[206]="&Icirc;",r[207]="&Iuml;",r[208]="&ETH;",r[209]="&Ntilde;",r[210]="&Ograve;",r[211]="&Oacute;",r[212]="&Ocirc;",r[213]="&Otilde;",r[214]="&Ouml;",r[215]="&times;",r[216]="&Oslash;",r[217]="&Ugrave;",r[218]="&Uacute;",r[219]="&Ucirc;",r[220]="&Uuml;",r[221]="&Yacute;",r[222]="&THORN;",r[223]="&szlig;",r[224]="&agrave;",r[225]="&aacute;",r[226]="&acirc;",r[227]="&atilde;",r[228]="&auml;",r[229]="&aring;",r[230]="&aelig;",r[231]="&ccedil;",r[232]="&egrave;",r[233]="&eacute;",r[234]="&ecirc;",r[235]="&euml;",r[236]="&igrave;",r[237]="&iacute;",r[238]="&icirc;",r[239]="&iuml;",r[240]="&eth;",r[241]="&ntilde;",r[242]="&ograve;",r[243]="&oacute;",r[244]="&ocirc;",r[245]="&otilde;",r[246]="&ouml;",r[247]="&divide;",r[248]="&oslash;",r[249]="&ugrave;",r[250]="&uacute;",r[251]="&ucirc;",r[252]="&uuml;",r[253]="&yacute;",r[254]="&thorn;",r[255]="&yuml;"),"ENT_NOQUOTES"!==u&&(r[34]="&quot;"),"ENT_QUOTES"===u&&(r[39]="&#39;"),r[60]="&lt;",r[62]="&gt;";for(n in r)r.hasOwnProperty(n)&&(i[String.fromCharCode(n)]=r[n]);return i},async:function(e){return function(){function t(e){return e.done?e.value:e.value.then?e.value.then(function(e){return t(n.next(e))},function(e){return t(n["throw"](e))}):e.value(function(e,r){t(e?n["throw"](e):n.next(r))})}var n=e.apply(this,arguments);return t(n.next())}}};exports.helper=helper});
//# sourceMappingURL=IndexedDBWrapper.umd.min.js.map